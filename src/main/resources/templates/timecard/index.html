<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/component :: head('タイムカード')}"></head>
<script>
function entryCheck(id, workstarttime) {

	var resultString = '';

    if(workstarttime == 'null' || workstarttime == null) {
    	resultString = '打刻の状態を「出勤」にしてもよろしいですか？';
    }else {
    	resultString = '打刻の状態を「打刻済み」にしてもよろしいですか？';
    }

    var result = window.confirm(resultString);

    if(result) {
    	document.location.href = '/timecard/entry?id=' + id;
    }
}
</script>
<body>
<th:block th:replace="~{layout/component :: header}"></th:block>
<div class="container">
	<th:block th:replace="~{layout/component :: container_top('タイムカード')}"></th:block>
	<div class="row justify-content-start">
		<table class="table table-striped table-sm">
		    <tr>
		      <th></th>
		      <th>ID</th>
		      <th>氏名</th>
		      <th>出勤</th>
		      <th>退勤</th>
		    </tr>
		    <tr th:each="entity:${list}">
		      <td th:if="${entity.workstarttime == null}"><input type="button" value="出勤" th:attr="onclick='entryCheck(' + ${entity.id} + ', \'' + entity.workstarttime + '\');'"></td>
		      <td th:if="${entity.workstarttime != null && entity.workendtime == null}"><input type="button" value="退勤" th:attr="onclick='entryCheck(' + ${entity.id} + ', \'' + entity.workstarttime + '\');'"></td>
		      <td th:if="${entity.workstarttime != null && entity.workendtime != null}"><input type="button" value="打刻済み" disabled></td>
		      <td th:text="${entity.id}" id="id" th:field="*{id}">id</td>
		      <td th:text="${entity.koinmaster.koinname}">name</td>
		      <td th:text="${entity.workstarttime}">name</td>
		      <td th:text="${entity.workendtime}">age</td>
		    </tr>
	    </table>
	</div>
</div>
<footer th:replace="~{layout/component :: footer}"></footer>
</body>
</html>